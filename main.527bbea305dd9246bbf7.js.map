{"version":3,"sources":["webpack:///./js/api.js","webpack:///./js/apiService.js","webpack:///./photoPagination/index.js","webpack:///./js/murkup-html.js","webpack:///./js/refs.js","webpack:///./index.js","webpack:///./templates/photoCard.hbs"],"names":["baseApi","key","url","apiService","requestPath","searchPhoto","page","fetch","then","result","json","PhotoPagination","this","total_page","fetchPhotos","data","totalHits","incrementPage","hits","catch","error","console","log","resetPage","newQuery","newTotalPage","refs","wrapper","document","createElement","form","input","gallery","button","querySelector","body","classList","add","type","name","autocomplete","placeholder","append","prepend","createMurkupHtml","formRef","buttonRef","galleryRef","photoPagination","addEventListener","event","preventDefault","query","currentTarget","elements","value","height","clearTimeout","id","innerHTML","appendPhotosMurkup","clientHeight","toScroll","totalHeight","setTimeout","window","scrollTo","array","murkup","map","element","photoCard","insertAdjacentHTML","Handlebars","module","exports","template","container","depth0","helpers","partials","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call"],"mappings":"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","file":"main.527bbea305dd9246bbf7.js","sourcesContent":["const baseApi = {\r\n    key: '20667858-5f0c6641398370706bf4f66c3',\r\n    url: \"https://pixabay.com/api/\",\r\n};\r\nexport default baseApi;","import baseApi from './api';\r\nconst { key, url } = baseApi;\r\n\r\nconst apiService = {\r\n    requestPath(searchPhoto, page) {\r\n        const queryPath = `${url}?image_type=photo&orientation=horizontal&q=${searchPhoto}&page=${page}&per_page=12&key=${key}`;\r\n        return fetch(queryPath).then(result => result.json());\r\n    },\r\n};\r\n\r\nexport default apiService;\r\n//https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=что_искать&page=номер_страницы&per_page=12&key=твой_ключ","import apiService from '../js/apiService';\r\n\r\nexport default class PhotoPagination {\r\n    constructor() {\r\n        this.searchPhoto = ' ';\r\n        this.page = 1;\r\n        this.total_page = '';\r\n    }\r\n    fetchPhotos() {\r\n        // console.log(this);\r\n        return apiService.requestPath(this.searchPhoto, this.page)\r\n            .then(data => {\r\n                this.total_page = data.totalHits;\r\n                this.incrementPage();\r\n\r\n                return data.hits;\r\n            }).catch(error => console.log('ERROR', error));\r\n    }\r\n    get query() {\r\n        return this.searchPhoto;\r\n    }\r\n    set query(newQuery) {\r\n        this.searchPhoto = newQuery;\r\n    }\r\n    incrementPage() {\r\n        if (this.page === this.total_page) return;\r\n        this.page += 1;\r\n    }\r\n    get totalPage() {\r\n        return this.total_page;\r\n    }\r\n    set totalPage(newTotalPage) {\r\n        this.total_page = newTotalPage;\r\n    }\r\n    resetPage() {\r\n        this.page = 1;\r\n    }\r\n}\r\n\r\n","import getRefs from './refs';\r\nconst refs = getRefs();\r\nfunction createMurkupHtml() {\r\n\r\nrefs.wrapper.classList.add(\"wrapper\");\r\nrefs.form.classList.add(\"search-form\");\r\nrefs.input.type = \"text\";\r\nrefs.input.name = \"query\";\r\nrefs.input.autocomplete = \"off\";\r\nrefs.input.placeholder = \"Search images...\";\r\nrefs.input.classList.add(\"input\");\r\nrefs.gallery.classList.add(\"gallery\");\r\nrefs.form.append(refs.input);\r\nrefs.wrapper.append(refs.form, refs.gallery);\r\nrefs.body.prepend(refs.wrapper);\r\n}\r\nexport default createMurkupHtml;","export default function getRefs() {\r\n    return {\r\n         wrapper: document.createElement(\"div\"),\r\n         form: document.createElement(\"form\"),\r\n         input: document.createElement(\"input\"),\r\n         gallery: document.createElement(\"ul\"),\r\n         button: document.querySelector(\".btn\"),\r\n         body: document.querySelector(\"body\"),\r\n    };\r\n};","import './styles.css';\r\nimport PhotoPagination from './photoPagination/index';\r\nimport photoCard from './templates/photoCard.hbs';\r\nimport createMurkupHtml from './js/murkup-html';\r\n\r\ncreateMurkupHtml();\r\n\r\nconst formRef = document.querySelector(\".search-form\");\r\nconst buttonRef = document.querySelector(\".btn\");\r\nconst galleryRef = document.querySelector(\".gallery\");\r\n\r\nconst photoPagination = new PhotoPagination();\r\n\r\nformRef.addEventListener('submit', onSearch);\r\nbuttonRef.addEventListener('click', loadMore);\r\nlet id = 0;\r\nlet height;\r\n\r\nfunction onSearch(event) {\r\n    event.preventDefault();\r\n    photoPagination.query = event.currentTarget.elements.query.value;\r\n    photoPagination.resetPage();\r\n    height = '';\r\n    clearTimeout(id);\r\n    // console.log(height);\r\n    photoPagination.fetchPhotos().then(data => {\r\n        cleanContainer();\r\n        appendPhotosMurkup(data);\r\n    });\r\n}\r\nasync function loadMore() {\r\n    height = galleryRef.clientHeight;\r\n    await photoPagination.fetchPhotos().then(data => appendPhotosMurkup(data));\r\n    toScroll();\r\n    // console.log(height);\r\n}\r\nfunction toScroll() {\r\n    let totalHeight = height + 80;\r\n    id = setTimeout(() => {\r\n        window.scrollTo(0, totalHeight);\r\n    }, 500)\r\n}\r\n\r\nfunction appendPhotosMurkup(array) {\r\n    const murkup = array.map(element => photoCard(element));\r\n    galleryRef.insertAdjacentHTML('beforeend', murkup);\r\n}\r\nfunction cleanContainer() {\r\n    galleryRef.innerHTML = ' ';\r\n}\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"photo-card\\\">\\r\\n    <img class=\\\"photo-image\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":34},\"end\":{\"line\":2,\"column\":50}}}) : helper)))\n    + \"\\\" alt=\\\"photo-card\\\" />\\r\\n    <div class=\\\"stats\\\">\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">thumb_up </i><span class=\\\"info\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":70},\"end\":{\"line\":5,\"column\":79}}}) : helper)))\n    + \"</span>\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">visibility </i><span class=\\\"info\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":72},\"end\":{\"line\":8,\"column\":81}}}) : helper)))\n    + \"</span>\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">comments </i><span class=\\\"info-com\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":74},\"end\":{\"line\":11,\"column\":86}}}) : helper)))\n    + \"</span>\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">cloud_download </i><span class=\\\"info\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":14,\"column\":76},\"end\":{\"line\":14,\"column\":89}}}) : helper)))\n    + \"</span>\\r\\n        </p>\\r\\n    </div>\\r\\n\\r\\n\\r\\n\";\n},\"useData\":true});"],"sourceRoot":""}